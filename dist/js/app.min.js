!function(a,b,$,c,d){"use strict";c=c||{},c.ua=function(){var a=navigator.userAgent.toLowerCase();(a.match("iphone")||a.match("ipod")||a.match("ipad")||a.match("android")||!a.match("chrome"))&&($("#wrapper").css({display:"none"}),$("#error").css({display:"block"}))},a.codes=c}(this,document,jQuery,this.codes),function(a,b,$,c,d){"use strict";c=c||{},c.songReset=function(){c.songList=[[{id:"129767452",code:{first:"Am",second:"Em",third:"F"},bpm:97,beat:2,start:14.7}],[{id:"827638927",code:{first:"Fs",second:"Cs",third:"Dsm"},bpm:140,beat:4,start:0}],[{id:"317186341",code:{first:"G",second:"A",third:"D"},bpm:115,beat:2,start:.6}],[{id:"592933803",code:{first:"C",second:"D",third:"Em"},bpm:100,beat:2,start:3.8}],[{id:"416565145",code:{first:"G",second:"D",third:"Em"},bpm:138,beat:4,start:3.2}],[{id:"254659541",code:{first:"Bb",second:"Gm",third:"Dm"},bpm:62,beat:4,start:3.2}],[{id:"879034409",code:{first:"Bm",second:"Em",third:"Am"},bpm:192,beat:4,start:19}],[{id:"271601352",code:{first:"G",second:"A",third:"Bm"},bpm:96,beat:2,start:-.5}],[{id:"201281527",code:{first:"C",second:"F",third:"G"},bpm:105,beat:2,start:10.9}],[{id:"379048300",code:{first:"Bm",second:"G",third:"A"},bpm:150,beat:4,start:1.3}],[{id:"681020904",code:{first:"G",second:"A",third:"Fsm"},bpm:122,beat:4,start:9.4}],[{id:"574710838",code:{first:"A",second:"B",third:"Csm"},bpm:150,beat:4,start:13.7}],[{id:"174420177",code:{first:"Am",second:"Dm",third:"G"},bpm:142,beat:4,start:16.7}],[{id:"573927210",code:{first:"C",second:"G",third:"Am"},bpm:138,beat:4,start:8}],[{id:"321108219",code:{first:"As",second:"F",third:"Gm"},bpm:100,beat:4,start:11.5}]]},a.codes=c}(this,document,jQuery,this.codes),function(a,b,$,c,d){"use strict";c=c||{},c.speed=1500,c.maxHeight=10499,c.codeArray=["A","B","C","D","E","F","G","Am","Bm","Cm","Dm","Em","Fm","Gm","As","Bs","Cs","Ds","Es","Fs","Gs","Ab","Bb","Cb","Db","Eb","Fb","Gb","Asm","Bsm","Csm","Dsm","Esm","Fsm","Gsm","Abm","Bbm","Cbm","Dbm","Ebm","Fbm","Gbm"],c.codeHeight=250,c.typeList=["first","second","third"];var e=["Asm","Gsm","Abm","Bbm","Gbm"];c.codePattern=0,c.currentSong=0,c.codeSound=[],c.charaHeight=489;var f,g,h,i=c.codeArray.length,j=e.length;for(f=0;f<i;f++){for(h=!0,g=0;g<j;g++)if(c.codeArray[f]===e[g]){h=!1;break}h&&(c.codeSound[f]=new Audio("audio/"+c.codeArray[f]+".mp3"))}a.codes=c}(this,document,jQuery,this.codes),function(a,b,$,c,d){"use strict";c=c||{};var e,f=25,g=0,h=20,i=5e3,j=1500;c.defaultFadeVal=.013,c.itunesSearch=function(a){var b={lang:"ja_jp",entry:"music",media:"music",country:"JP"};a&&a.term&&(b.term=a.term),a&&a.limit&&(b.limit=a.limit),$.ajax({url:"https://itunes.apple.com/search",method:"GET",data:b,dataType:"jsonp",success:function(b){c(b,a)},error:function(){}});var c=function(a){for(var b=0,c=a.results.length;b<c;b++);}},c.itunesLookUp=function(a){var b={id:a,country:"JP"};$.ajax({url:"http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/wa/wsLookup",method:"GET",data:b,dataType:"jsonp",success:function(a){d(a)},error:function(){}});var d=function(a){var b=!1;e=c.defaultFadeVal,"m4v"===a.results[0].previewUrl.substr(-3,3)&&(e=.038),c.song=new Audio(a.results[0].previewUrl),c.song.addEventListener("canplaythrough",function(){!0!==b&&(b=!0,c.showAnswer(a),c.song.volume=0,$(".chara").removeClass("play").addClass("think"),setTimeout(function(){var a;$(".chara").removeClass("think").addClass("got"),(a=c.songList[c.codePattern][c.currentSong].start)<0?setTimeout(function(){c.song.play(),l()},-1e3*a):(c.song.currentTime=a,c.song.play(),l()),setTimeout(function(){k("first",c.tempo,c.songList[c.codePattern][c.currentSong].beat),setTimeout(function(){$(".chara").removeClass("got")},j)},1400)},j))})}};var k=function(a,b,d){var e=1,f=c.typeList.indexOf(a),g=c.songList[c.codePattern][c.currentSong].code[a];for(c.codeSound[c.codeArray.indexOf(g)].currentTime=0,c.codeSound[c.codeArray.indexOf(g)].play(),n(a);e<d;e++)n(a,b,e);setTimeout(function(){f+1<3?k(c.typeList[f+1],c.tempo,d):setTimeout(function(){m()},i)},b*d*1e3)},l=function(){setTimeout(function(){c.song.volume+=e,g++,g<f?l():g=0},h)},m=function(){setTimeout(function(){c.song.volume-=e,g++,g<f-1?m():(c.song.pause(),g=0,c.songList.splice(c.codePattern,1),0===c.songList.length&&c.songReset(),c.init())},h)},n=function(a,b,c){setTimeout(function(){$(".slot ."+a).animate({transform:"scale(1.2)"},50).animate({transform:"scale(1)"},50)},b*c*1e3)};a.codes=c}(this,document,jQuery,this.codes),function(a,b,$,c,d){"use strict";c=c||{},c.btnHandler=function(a){var b=c.typeList[a],d=c.codeArray.indexOf(c.songList[c.codePattern][c.currentSong].code[b]),e=-1*c.codeHeight*d,f=$(".slot ."+b),g=$(".btns ."+b);g.addClass("next"),g.on("click",function(){f.clearQueue().stop(),f.css({"background-position":"0 "+e+"px"}),c.codeSound[d].play(),g.off("click").addClass("selected").removeClass("next"),$(".chara").addClass("play"),$(".guitarEffect__0001").css({bottom:"20px",right:"40px",opacity:0}).animate({bottom:"10px",right:"10px",opacity:1},500,"linear").animate({bottom:0,right:"-20px",opacity:0},500,"linear"),$(".guitarEffect__0002").css({bottom:"-30px",right:"40px",opacity:0}).animate({bottom:"-60px",right:"20px",opacity:1},500,"linear").animate({bottom:"-90px",right:0,opacity:0},500,"linear"),setTimeout(function(){2===a?c.itunesLookUp(c.songList[c.codePattern][c.currentSong].id):($(".chara").removeClass("play"),c.btnHandler(a+1))},1e3)})},a.codes=c}(this,document,jQuery,this.codes),function(a,b,$,c,d){"use strict";c=c||{},c.scroll=function(){for(var a=0;a<3;a++)e(a)};var e=function(a){!function(a){$(".slot ."+c.typeList[a]).css({"background-position":"0 1px"}).animate({"background-position":"0 "+c.maxHeight+"px"},{duration:c.speed,easing:"linear",complete:function(){e(a)}})}(a)};a.codes=c}(this,document,jQuery,this.codes),function(a,b,$,c,d){"use strict";c=c||{},c.showAnswer=function(a){$(".jacket img").attr({src:a.results[0].artworkUrl100}),$(".answer .trackName").text(a.results[0].trackName),$(".answer .artistName").text(a.results[0].artistName),setTimeout(function(){$(".answer").css({display:"block"}).animate({opacity:1}),$(".jacket").css({display:"block",top:"-80px"}).animate({opacity:1,top:"-120px"})},3e3)},c.resetAnswer=function(){$(".answer, .jacket").animate({opacity:"0"})},a.codes=c}(this,document,jQuery,this.codes),function(a,b,$,c,d){"use strict";c=c||{},$(function(){c.ua(),c.songReset(),c.init()}),c.init=function(){c.codePattern=Math.floor(Math.random()*c.songList.length),c.currentSong=0,c.tempo=60/c.songList[c.codePattern][c.currentSong].bpm,c.scroll();var a=$(".btns");a.find(".first").removeClass("selected"),a.find(".second").removeClass("selected"),a.find(".third").removeClass("selected"),c.btnHandler(0),c.resetAnswer(),$("#ura").on("click",function(){$("#wrapper").velocity({rotateY:"90deg",scale:.5},1500,function(){$(".threeSize").show(),$("#wrapper").velocity({rotateY:"180deg",scale:1},1500)})})},a.codes=c}(this,document,jQuery,this.codes);